location /google {
    access_log  /home/nginx/log/proxy/google.access.log main;
    error_log   /home/nginx/log/proxy/google.error.log warn;

    proxy_redirect	off;
    proxy_set_header Host	"www.google.com";	#$host;
    proxy_set_header X-Real-IP	$remote_addr;
    proxy_set_header X-Forwarded-For	$proxy_add_x_forwarded_for;
    proxy_set_header Accept-Encoding 	"";
#    client_max_body_size	100m;
#    client_body_buffer_size	128k;
     
#    proxy_connect_timeout	90s;
#    proxy_send_timeout	90s;
#    proxy_read_timeout	90s;

    proxy_buffer_size	4k;
    proxy_buffers	4	32k;
    proxy_busy_buffers_size	64k;
    proxy_temp_file_write_size	64k;

#    proxy_cache	CACHE;
#    proxy_cache_valid	200 302 6h;
#    proxy_cache_valid	404	1m;

    proxy_pass	https://www.google.com/;

    sub_filter	www.google.com time-river.xyz/google;
    sub_filter_once	off;
}

location  /wiki {
    access_log  /home/nginx/log/proxy/wiki.access.log main;
    error_log   /home/nginx/log/proxy/wiki.error.log warn;

    proxy_redirect	off;
    proxy_set_header Host	$host;
    proxy_set_header X-Real-IP	$remote_addr;
    proxy_set_header X-Forwarded-For	$proxy_add_x_forwarded_for;
    proxy_set_header Accept-Encoding 	"";
    client_max_body_size	100m;
    client_body_buffer_size	128k;
     
    proxy_connect_timeout	90s;
    proxy_send_timeout	90s;
    proxy_read_timeout	90s;

    proxy_buffer_size	4k;
    proxy_buffers	4	32k;
    proxy_busy_buffers_size	64k;
    proxy_temp_file_write_size	64k;

 #   proxy_cache	CACHE;
 #   proxy_cache_valid	200 302 6h;
 #   proxy_cache_valid	404	1m;

    proxy_pass	https://zh.wikipedia.org/;

    sub_filter  zh.wikipedia.org time-river.xyz/wiki/;
}

location  /gist/ {
    access_log  /home/nginx/log/proxy/gist.access.log main;
    error_log   /home/nginx/log/proxy/gist.error.log warn;

    proxy_redirect	off;
    proxy_set_header Host	$host;
    proxy_set_header X-Real-IP	$remote_addr;
    proxy_set_header X-Forwarded-For	$proxy_add_x_forwarded_for;
    proxy_set_header Accept-Encoding 	"";
    client_max_body_size	100m;
    client_body_buffer_size	128k;
     
    proxy_connect_timeout	90s;
    proxy_send_timeout	90s;
    proxy_read_timeout	90s;

    proxy_buffer_size	4k;
    proxy_buffers	4	32k;
    proxy_busy_buffers_size	64k;
    proxy_temp_file_write_size	64k;

 #   proxy_cache	CACHE;
 #   proxy_cache_valid	200 302 6h;
 #   proxy_cache_valid	404	1m;

    proxy_pass	https://gist.github.com/;

    sub_filter	gist.github.com time-river.xyz/gist/;
}
